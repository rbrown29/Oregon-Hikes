<%- include('head.ejs') -%>
<style>
    @import url("https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap");
    body {
      background-color: #3e363f;
      font-family: "Syne Mono", monospace;
    }
    .buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
  }
  .btn {
    margin: 5px 0;
    width: 100%;
    max-width: 500px; 
  }
    a {
      color: #fff;
    }
    a:hover {
      color: #fff;
    }
    .input-field input[type="text"]:focus:not([readonly]) {
      border-bottom: 1px solid white !important;
      box-shadow: 0 1px 0 0 white !important;
    }
    .input-field input[type="email"]:focus:not([readonly]) {
      border-bottom: 1px solid white !important;
      box-shadow: 0 1px 0 0 white !important;
    }
    textarea:focus:not([readonly]) {
      border-bottom: 1px solid white !important;
      box-shadow: 0 1px 0 0 white !important;
    }
    textarea:focus + label {
      color: white !important;
    }
    textarea:focus {
      color: white !important;
    }
    input[type="email"]:focus + label,
    input[type="email"]:focus {
      color: white !important;
    }
    input[type="text"]:focus + label,
    input[type="text"]:focus {
      color: white !important;
    }
    i {
      color: black !important;
    }
  </style>
<body>
  <div class="container">
    <div class="row">
      <div class="col s12 m6 offset-m3">
        <h1 class="center-align">Edit Profile</h1>
        <% if (flashMessages.error && flashMessages.error.length > 0) { %>
          <div class="card-panel red">
            <% flashMessages.error.forEach(function(message) { %>
              <p class="white-text"><%= message %></p>
            <% }); %>
          </div>
        <% } %>
        <% if (flashMessages.success && flashMessages.success.length > 0) { %>
          <div class="card-panel green lighten-1">
            <% flashMessages.success.forEach(function(message) { %>
              <p class="white-text"><%= message %></p>
            <% }); %>
          </div>
        <% } %>
        <form action="/profile/edit" method="POST">
          <div class="input-field">
            <input type="text" name="firstName" id="firstName" value="<%= profile.firstName %>" required />
            <label for="firstName" class="<%= profile.firstName ? 'active' : '' %>">First Name</label>
          </div>
          <div class="input-field">
            <input type="text" name="lastName" id="lastName" value="<%= profile.lastName %>" required />
            <label for="lastName" class="<%= profile.lastName ? 'active' : '' %>">Last Name</label>
          </div>
          <div class="input-field">
            <input type="email" name="email" id="email" value="<%= profile.email %>" required />
            <label for="email" class="<%= profile.email ? 'active' : '' %>">Email</label>
          </div>
          <div class="input-field">
            <textarea name="bio" id="bio" class="materialize-textarea"><%= profile.bio %></textarea>
            <label for="bio" class="<%= profile.bio ? 'active' : '' %>">Bio</label>
          </div>
          <button class="btn waves-effect waves-light black lighten-1" type="submit" name="action">Update Profile</button>
          <button class="btn waves-effect waves-light black lighten-1" type="button" onclick="resetForm()">Reset Form</button>
          <button class="btn waves-effect waves-light black lighten-1" type="reset" onclick="window.location.href='/profile'">Return To Profile</button>
        </form>
      </div>
    </div>
  </div>
  <%- include('scripts.ejs') -%>
  <script>
    function resetForm() {
      document.getElementById("firstName").value = "";
      document.getElementById("lastName").value = "";
      document.getElementById("email").value = "";
      document.getElementById("bio").value = "";
    }
  </script>
</body>

